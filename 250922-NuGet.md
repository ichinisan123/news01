# New Trusted Publishing enhances security on NuGet.org

September 22nd, 2025

We're excited to announce Trusted Publishing on nuget.org \-\-\- a simpler, safer way to publish NuGet packages from GitHub Actions. Rather than relying on longâ€‘lived API keys, your workflow can use a shortâ€‘lived GitHub OIDC token to request a temporary, singleâ€‘use NuGet API key. These keys expire quickly (â‰ˆ 1 hour), eliminating longâ€‘lived secrets
that need to be stored, rotated, or protected from leaks.

ğŸ‘‰ Read the docs at
[aka.ms/nuget/trusted-publishing](https://aka.ms/nuget/trusted-publishing)

## Why Trusted Publishing? ğŸ”’

- No longâ€‘lived secrets \-\-\- nothing sensitive stored in your repository
  or CI.
- Shortâ€‘lived credentials \-\-\- temporary API keys are issued justâ€‘inâ€‘time
  and typically last about **1 hour**.
- One token â†’ one key \-\-\- each job's OIDC token maps to a single
  temporary API key used for that publish.

## Getting started ğŸš€

1.  **Open the Trusted Publishing page** Sign in to **nuget.org** â†’ open
    your user menu (top right) â†’ **Trusted Publishing** (next to **API
    Keys**).
2.  **Create a policy**
    - **Package owner:** you or your organization
    - **Repository owner / repository:** your GitHub org/user and
      repository name (for example `contoso-sdk`)
    - **Workflow file:** the YAML file in `.github/workflows/` (for
      example `release.yml`)
    - *(Optional)* **Environment:** if your workflow uses GitHub Actions
      environments
3.  **Wire up your GitHub Actions workflow** using the minimal example
    below.

## Minimal GitHub Actions example âš™ï¸

This example includes only the steps that interact with nuget.org:
enabling OIDC, exchanging the token for a temporary API key, and pushing
the package.

``` yaml
permissions:
  id-token: write   # required for GitHub OIDC

jobs:
  build-and-publish:
    permissions:
      id-token: write  # enable GitHub OIDC token issuance for this job

    steps:
      # Build your artifacts/my-sdk.nupkg package here

      # Get a short-lived NuGet API key
      - name: NuGet login (OIDC â†’ temp API key)
        uses: NuGet/login@v1
        id: login
        with:
          # Recommended: use a secret like ${{ secrets.NUGET_USER }} for your nuget.org username (profile name), NOT your email address
          user: contoso-bot

      # Push the package
        run: dotnet nuget push artifacts/my-sdk.nupkg --api-key ${{ steps.login.outputs.NUGET_API_KEY }} --source https://api.nuget.org/v3/index.json
```

------------------------------------------------------------------------

## How it works ğŸ”

1.  GitHub issues an OIDC token to the job.
2.  The NuGet login step sends that token to nuget.org.
3.  nuget.org validates the token against your Trusted Publishing policy and returns a temporary API key.
4.  Your workflow uses that key to publish. Request the key immediately before running `dotnet nuget push` \-\-\- it expires quickly (â‰ˆ **1 hour**).

## Policy ownership & lifecycle ğŸ“œ

- **Private repo bootstrap (7 days, re-activate anytime).** New policies for private repositories start out as active for 7 days by default. After the first successful NuGet login (the exchange of a job's OIDC token for a temporary API key), the policy becomes permanently active and is bound to immutable GitHub IDs. If you miss the initial 7â€‘day window, you can manually reâ€‘activate the policy for another 7 days from the Trusted Publishing page. A successful NuGet login is sufficient \-\-\- you don't need to publish a package.
- **Owner matters.** A policy is owned by a user or organization and applies only to packages owned by that owner.
- **Org changes are respected.** If the policy creator loses org membership, or the org is locked or deleted, the policy is disabled and displays a clear warning. When membership or org access is restored, the policy reâ€‘activates automatically.

## Migrating from longâ€‘lived API keys ğŸ”„

Already publishing from GitHub Actions? Switching is easy:

1.  Create a Trusted Publishing policy on nuget.org.
2.  Remove stored NuGet API keys from your repo or CI secrets.
3.  Add `NuGet/login@v1` to your workflow and use its output key with `dotnet nuget push`.
4.  Done --- enjoy, no more key management!

## Try it today ğŸš€

- Read the docs at [aka.ms/nuget/trusted-publishing](https://aka.ms/nuget/trusted-publishing)
- Sign in to **nuget.org â†’ Trusted Publishing** (next to **API Keys**)
  and create your first policy.

Huge thanks to OpenSSF and the Securing Software Repos working group for defining the Trusted Publishing guidelines and encouraging their adoption throughout the broader ecosystem.

Publish more securely and with less friction â€” thank you for contributing to the NuGet community. âœ¨
